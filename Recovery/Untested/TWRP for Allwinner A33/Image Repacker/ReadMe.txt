[ 18.02.2013 ]=====================================================================================

		imgRePacker.exe&imgrepacker
		version 2.04 (windows&linux)
		(c) RedScorpio, Moscow, 2012-2013

	Программа дял распаковки/запаковки образов прошивок LiveSuit и PhoenixSuit (*.img)

    Назначение:
    Распаковка для внесения изменений и последующей запаковки образов прошивок формата LiveSuit
и PhoenixSuit (утилиты для прошивки устройств на чипах от Allwinner и их аналогов).

    Изначально утилита создавалась для устройств на чмпах SC9800/8600; по функционалу повторяет 
набор утилит SoChip Modding Tools (SMT) от китайского коллеги esxgx с дополнениями (заменами) 
от RedScorpio и расширяет его возможности.

    Отличия (они же преимущества):
	- утилита All-in-one;
	- автоматическое определение формата образа прошивки (LiveSuit/PhoenixSuit);
	- автоматическое распознание структуры прошивки для определения порядка действий;
	- создание блоков [FILELIST] и [IMAGE_CFG] (частично) файла конфигурации образа *.cfg 
          (возможно использование в упаковщике от производителя dragon);
	- автоматическое извлечение образов дисков (условие: zdisk или описан в блоке [down_num] 
	  файла sys_config.fex);
	- восстанавливаются (и используются при упаковке) все исходные файлы прошивки;
	- существенно меньше;
	- заметно производительнее.

    Поддерживаются прошивки устройств на чипсетах (известные мне):
	- Sochip SC8600/SC9800 (LiveSuit/zdisk);
	- Boxchip F10/F15/F16/F20 (LiveSuit/zdisk);
	- Teclast T7200/T8100 (LiveSuit/zdisk);
	- Allwinner F10/F13/F18 (LiveSuit/zdisk);
	- Allwinner F1C100/F1E200 (LiveSuit);
	- Allwinner A10/A13/A10s (LiveSuit);
	- Allwinner A31 (PhoenixSuit).

    Использование:
    "imgRePacker.exe [options] <name>.img"	- распаковка (Windows)
    "imgRePacker.exe [options] <name>.img.dump"	- запаковка  (Windows)
    "./imgrepacker [options] <name>.img"	- распаковка (Linux)
    "./imgrepacker [options] <name>.img.dump"	- запаковка  (Linux)

    Опции (в скобках указано имя в ini-файла и значение по умолчанию):
    /log	- создавать log-файл (log = 0);
    /debug	- писать отладочную информацию, работает только с опцией /log (debug = 0);
    /quiet	- отключить вывод в консоль (quiet = 0);
    /old	- использовать модифицированный старый метод распаковки/запаковки (old = 0);
		  Примечание:
		  В новом методе (используется с версии 2.00win/1.00lin) распаковка/запаковка идет
		  полностью в памяти. Это позволило уменьшить количество операций чтения/записей на 
		  HDD, но привело к невозможности работать с прошивками большого размера (ограничения 
		  по выделению памяти отдельному процессу). 
		  Модифицированный старый метод уменьшает количество потребляемой памяти, но 
		  увеличивает количество операций ввода/вывода.
		  Режимы переключаются автоматически при превышению размера образа прошивки значения 
		  memsize в ini-файле (по умолчанию = 100МБайт; максимальное значение 2ГБайта - 1Байт).
    /noiso	- не формировать при  распаковке/не использовать при запаковке образы файловых 
		  систем прошивки (noiso = 0);
    /unimg	- режим совместимости с утилитой unimg - формируются RAW-файлы прошивки (unimg = 0);
    /8600	- зааковывать в формате старых прошивку SC8600 - не используется файл конфигурации, 
		  другие параметры для формирования ZDisk (8600 = 0);
    /smt	- zdisk.img запаковывался с использованием SMT - некорректный размер файла 
		  в заголовке; используется при распаковке (smt = 0);
    /latin	- заменять нелатинские символы в путях к файлам прошивки; используется при 
		  распаковке (latin = 0);
    /skip	- пропустить проверку размера файла образа прошивки; используется при распаковке 
		  (skip = 0);
    /mono	- включить монохромный режим (mono = 0); 
    /ini	- перезаписать ini-file с опциями из командной строки (-);
		  Примечание:
		  Опции командной строки всегда имеют приоритет выше ini-файлом.

    Состав архива:
    1. imgRePacker.exe	- Windows-версия.
    2. imgrepacker	- Linux-версия.
    3. runner.bat	- командный файл для распаковки образов прошивок SoChip SC9800/8600 и 
			  их аналогов (BoxChip, Teclast) от losber (требует установки UltraISO).
    4. lzma.exe		- архиватор LZMA.
    5. ReadMe.txt	- этот файл.

    ВНИМАНИЕ. Для распаковки и упаковки прошивок, имеющих в своем составе ZDisk (например, SC9800), 
требуется утилита LZMA (для Windows-версии imgRePacker; имеется в архиве) или XZ (для Linux-версии 
imgrepacker; должна быть предустановлена в системе).

===================================================================================================

    Thanks:
	esxgx 		for his research
	losber (4PDA)	for testing (windows)

===================================================================================================

History:

2.04 [W&L] (18.02.2013)
	+ определение формата файла раздела (iso);
	- устранены мелкие ошибки в коде;
	+ мелкие улучшения.
2.03 [W&L] (05.02.2013)
	+ добавлена поддержка формата PhoenixSuit;
        + добавлен блок [IMAGE_CFG] файла конфигурации образа *.cfg (частично);
	+ добавлен ключ /mono;
	- устранены мелкие ошибки в коде;
	+ мелкие улучшения.
2.02 [W&L] (05.10.2012)
	~ версионность Windows и Linux вариантов утилиты выравнена во избежание путаницы;
	+ добавлен ключ /old (переключение на модифицированный старый метод);
	+ добавлено ограничение размера прошивки при котором происходит автоматическое переключение
	  на модифицированный старый метод;
	+ добавлена работа с *.ini файлом;
	+ добавлен ключ /ini;
	+ добавлен ключ /skip;
	- исправлена ошибка определения пути файла при разных стилях сохранения имени в file.hdr;
	- устранены мелкие ошибки в коде;
	+ мелкие улучшения.
1.00 [Lin] (01.08.2012)
	! Release
2.01 [Win] (01.08.2012)
	- устранен bug с созданием пустых каталогов;
	+ добавлен ключ /latin;
	+ мелкие улучшения.
2.00 [Win] (03.07.2012)
	~ изменен алгоритм работы с памятью для увеличения производительности.
1.05 [Win] (11.05.2012)
	+ корректная обработка файлов с цифровой подписью.
1.04 [Win] (17.04.2012)
	- исправлена работа с большим количеством файлов в прошивке.
1.03 [Win] (14.04.2012)
	- исправлено извлечение образов дисков из lzma-архивов в прошивках с длинными путями.
1.02 [Win] (20.02.2012)
	- исправлена работа с путями в UNIX-стиле в заголовках.
1.01 [Win] (17.02.2012)
	- исправлена работа с файлами, в названии которых содержатся пробелы;
	+ мелкие улучшения.
1.00 [Win] (14.02.2012)
	! Release

===================================================================================================
